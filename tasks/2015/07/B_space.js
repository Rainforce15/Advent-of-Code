let w={},l,v=v=>w[v]==0[0]?parseInt(v):w[v],x=n=>{while(w.a==n.u)for(l of n.trim().split("\n")) (l=>{while(l.length<4)l.unshift(l.a);let [h,i,j,k]=l,A=v(h),B=v(j);!isNaN(h?A+B:B)&&!w[k]&&(w[k]={I:a=>a,N:a=>~a,L:(b,a)=>a<<b,R:(b,a)=>a>>b,A:(b,a)=>a&b,O:(b,a)=>a|b}[(i||[])[0]||"I"](B,A)&0xFFFF)})(l.split(/ -> | /))};module.exports=n=>(x(n),w={b:w.a},x(n),w.a)